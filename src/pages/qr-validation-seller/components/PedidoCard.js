import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { Clock, DollarSign, Phone, CreditCard, CheckCircle, Eye, RotateCcw, Package, User } from 'lucide-react';
import { Badge } from '@/utils/qr-validation.seller/Components/UI/Badge';
const getImagenProducto = (nombre) => {
    const n = nombre.toLowerCase();
    if (n.includes('hamburguesa'))
        return '/src/assets/qr-validation-seller/productos/1.jpg';
    if (n.includes('pizza'))
        return '/src/assets/qr-validation-seller/productos/2.jpg';
    if (n.includes('ensalada'))
        return '/src/assets/qr-validation-seller/productos/3.jpg';
    return '/src/assets/qr-validation-seller/productos/1.jpg';
};
export const PedidoCard = ({ pedido, onValidar, onVerDetalles }) => {
    const [isFlipped, setIsFlipped] = useState(false);
    const resumen = pedido.productos.slice(0, 2).map(p => `${p.cantidad}x ${p.nombre}`).join(', ');
    const restantes = Math.max(pedido.productos.length - 2, 0);
    const handleFlip = () => {
        setIsFlipped(!isFlipped);
        onVerDetalles(pedido.id);
    };
    /** Frente de la tarjeta */
    const CardFront = () => (_jsxs("div", { className: "bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden flex flex-col h-full transition-all duration-200 hover:-translate-y-1 hover:shadow-lg", children: [_jsxs("div", { className: "relative h-40", children: [_jsx("img", { src: getImagenProducto(pedido.productos[0].nombre), alt: pedido.productos[0].nombre, className: "w-full h-full object-cover" }), _jsx("div", { className: "absolute top-3 left-3", children: _jsx(Badge, { estado: pedido.estado }) }), _jsxs("div", { className: "absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/65 to-transparent px-4 py-3 text-white flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center gap-2 text-sm font-semibold", children: [_jsx(Clock, { className: "w-4 h-4" }), _jsx("span", { children: pedido.horaEntrega })] }), _jsxs("div", { className: "flex items-center gap-1 text-lg font-bold", children: [_jsx(DollarSign, { className: "w-5 h-5" }), _jsx("span", { children: pedido.total.toLocaleString() })] })] })] }), _jsxs("div", { className: "flex-1 flex flex-col gap-3 p-4", children: [_jsxs("div", { className: "flex items-start justify-between gap-3", children: [_jsxs("div", { className: "flex-1 min-w-0", children: [_jsxs("p", { className: "text-xs uppercase text-gray-400 font-semibold", children: ["Pedido #", pedido.codigo] }), _jsx("h3", { className: "text-lg font-bold text-gray-900 truncate", children: pedido.nombreCliente }), _jsxs("div", { className: "flex items-center gap-1.5 text-sm text-gray-600 mt-1", children: [_jsx(Phone, { className: "w-4 h-4 text-gray-400" }), _jsx("span", { className: "truncate", children: pedido.telefonoCliente })] })] }), _jsxs("div", { className: "flex flex-col items-end gap-1 text-xs text-gray-600", children: [_jsxs("div", { className: "flex items-center gap-1 font-semibold text-gray-800", children: [_jsx(CreditCard, { className: "w-4 h-4 text-yellow-500" }), _jsx("span", { className: "capitalize", children: pedido.metodoPago })] }), _jsx("span", { className: `px-2 py-1 rounded-full text-[11px] font-semibold ${pedido.pagado ? 'bg-green-100 text-green-700' : 'bg-yellow-50 text-yellow-700'}`, children: pedido.pagado ? 'Pagado' : 'Pendiente' })] })] }), _jsxs("div", { className: "bg-gray-50 border border-gray-200 rounded-lg p-3 text-sm text-gray-700", children: [_jsxs("p", { className: "font-semibold text-yellow-500 mb-1", children: [pedido.productos.length, " producto(s)"] }), _jsxs("p", { className: "text-gray-600 leading-snug", children: [resumen, restantes > 0 && ` +${restantes} mÃ¡s`] })] }), pedido.observaciones && (_jsx("div", { className: "bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-xs text-yellow-800", children: pedido.observaciones })), _jsxs("div", { className: "mt-auto grid grid-cols-2 gap-2", children: [_jsxs("button", { onClick: handleFlip, className: "w-full bg-white border-2 border-yellow-400 text-yellow-500 hover:bg-yellow-50 rounded-lg py-2.5 px-3 text-sm font-semibold transition-all duration-200 flex items-center justify-center gap-2", children: [_jsx(Eye, { className: "w-4 h-4" }), "Ver detalles"] }), _jsxs("button", { onClick: () => onValidar(pedido.id), disabled: pedido.estado !== 'preparacion', className: `w-full rounded-lg py-2.5 px-3 text-sm font-semibold transition-all duration-200 flex items-center justify-center gap-2 ${pedido.estado === 'preparacion'
                                    ? 'bg-yellow-400 hover:bg-yellow-500 text-white shadow-md hover:shadow-lg'
                                    : 'bg-gray-200 text-gray-500 cursor-not-allowed'}`, children: [_jsx(CheckCircle, { className: "w-4 h-4" }), pedido.estado === 'preparacion' ? 'Entregar' : 'Entregado'] })] })] })] }));
    /** Reverso de la tarjeta */
    const CardBack = () => (_jsxs("div", { className: "h-full flex flex-col", children: [_jsxs("div", { className: "bg-gradient-to-r from-yellow-400 to-yellow-500 text-white p-4 rounded-t-2xl", children: [_jsxs("div", { className: "flex justify-between items-start mb-2", children: [_jsxs("div", { className: "flex-1 min-w-0 mr-2", children: [_jsx("h3", { className: "font-bold text-lg truncate", children: pedido.nombreCliente }), _jsxs("p", { className: "text-sm text-yellow-100", children: ["Pedido #", pedido.codigo] })] }), _jsx("button", { onClick: handleFlip, className: "bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white p-2 rounded-lg transition-colors duration-200 flex-shrink-0", children: _jsx(RotateCcw, { className: "w-5 h-5" }) })] }), _jsxs("div", { className: "flex items-center justify-between mt-3 pt-3 border-t border-white/20", children: [_jsx("span", { className: "text-sm text-yellow-100", children: "Total" }), _jsxs("div", { className: "flex items-center text-2xl font-bold", children: [_jsx(DollarSign, { className: "w-6 h-6" }), _jsx("span", { children: pedido.total.toLocaleString() })] })] })] }), _jsxs("div", { className: "flex-grow overflow-y-auto p-4", children: [_jsxs("div", { className: "mb-4", children: [_jsx("h4", { className: "font-bold text-gray-900 text-sm mb-2", children: "Informaci\u00F3n del Cliente" }), _jsxs("div", { className: "bg-gray-50 rounded-lg p-3 space-y-2", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("span", { className: "text-sm text-gray-600 flex items-center gap-2", children: [_jsx(User, { className: "w-4 h-4" }), "Cliente"] }), _jsx("span", { className: "font-semibold text-gray-900", children: pedido.nombreCliente })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("span", { className: "text-sm text-gray-600 flex items-center gap-2", children: [_jsx(Phone, { className: "w-4 h-4" }), "Tel\u00E9fono"] }), _jsx("span", { className: "font-semibold text-gray-900", children: pedido.telefonoCliente })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("span", { className: "text-sm text-gray-600 flex items-center gap-2", children: [_jsx(Clock, { className: "w-4 h-4" }), "Hora entrega"] }), _jsx("span", { className: "font-semibold text-gray-900", children: pedido.horaEntrega })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("span", { className: "text-sm text-gray-600 flex items-center gap-2", children: [_jsx(CreditCard, { className: "w-4 h-4" }), "M\u00E9todo pago"] }), _jsx("span", { className: "font-semibold text-gray-900 capitalize", children: pedido.metodoPago })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsx("span", { className: "text-sm text-gray-600", children: "Estado pago" }), _jsx("span", { className: `px-2 py-1 rounded-full text-xs font-semibold ${pedido.pagado ? 'bg-green-100 text-green-700' : 'bg-yellow-50 text-yellow-700'}`, children: pedido.pagado ? 'Pagado' : 'Pendiente' })] })] })] }), _jsxs("div", { className: "mb-4", children: [_jsx("h4", { className: "font-bold text-gray-900 text-sm mb-2", children: "Productos" }), _jsx("div", { className: "bg-gray-50 rounded-lg p-3 space-y-2", children: pedido.productos.map((producto, idx) => (_jsxs("div", { className: "flex items-center justify-between py-1 border-b border-gray-200 last:border-0", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Package, { className: "w-4 h-4 text-yellow-400" }), _jsx("span", { className: "text-sm text-gray-700", children: producto.nombre })] }), _jsxs("span", { className: "text-sm font-semibold text-gray-900", children: [producto.cantidad, "x $", producto.precioUnitario.toLocaleString()] })] }, idx))) })] }), pedido.observaciones && (_jsxs("div", { className: "bg-yellow-50 border border-yellow-200 rounded-lg p-3", children: [_jsx("p", { className: "text-xs font-semibold text-yellow-800 mb-1", children: "Observaciones" }), _jsx("p", { className: "text-sm text-yellow-900", children: pedido.observaciones })] }))] }), _jsx("div", { className: "p-4 border-t border-gray-100", children: _jsxs("button", { onClick: () => onValidar(pedido.id), disabled: pedido.estado !== 'preparacion', className: `w-full py-3 px-4 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center shadow-md hover:shadow-lg ${pedido.estado === 'preparacion'
                        ? 'bg-yellow-400 hover:bg-yellow-500 text-white'
                        : 'bg-gray-200 text-gray-500 cursor-not-allowed'}`, children: [_jsx(CheckCircle, { className: "w-4 h-4 mr-2" }), pedido.estado === 'preparacion' ? 'Entregar Pedido' : 'Pedido Entregado'] }) })] }));
    return (_jsx("div", { className: "relative w-full h-[420px]", style: { perspective: '1000px' }, children: _jsxs("div", { className: `relative w-full h-full transition-transform duration-700 ease-in-out ${isFlipped ? '[transform:rotateY(180deg)]' : '[transform:rotateY(0deg)]'}`, style: { transformStyle: 'preserve-3d' }, children: [_jsx("div", { className: "absolute inset-0 w-full h-full", style: { backfaceVisibility: 'hidden' }, children: _jsx("div", { className: "bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden flex flex-col h-full transition-all duration-200 hover:-translate-y-1 hover:shadow-lg", children: _jsx(CardFront, {}) }) }), _jsx("div", { className: "absolute inset-0 w-full h-full", style: { backfaceVisibility: 'hidden', transform: 'rotateY(180deg)' }, children: _jsx("div", { className: "bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden flex flex-col h-full transition-all duration-200 hover:shadow-xl", children: _jsx(CardBack, {}) }) })] }) }));
};
